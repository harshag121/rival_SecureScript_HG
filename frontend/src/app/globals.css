@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap');

/* ─── Base ─────────────────────────────────────────────────────── */
@layer base {
  *, *::before, *::after { box-sizing: border-box; }

  html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
  }

  body {
    @apply bg-surface text-ink antialiased;
    font-family: 'Inter', system-ui, sans-serif;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-bold tracking-tight text-ink;
  }

  ::selection {
    @apply bg-accent-light text-accent;
  }
}

/* ─── Components ────────────────────────────────────────────────── */
@layer components {

  /* ── Buttons ─────────────────────────────────── */
  .btn {
    @apply inline-flex items-center justify-center gap-2 font-medium
           transition-all duration-150 select-none focus:outline-none
           disabled:opacity-40 disabled:cursor-not-allowed active:scale-[0.97];
  }

  .btn-primary {
    @apply btn px-5 py-2.5 rounded-full bg-ink text-white text-sm
           hover:bg-neutral-700
           focus-visible:ring-2 focus-visible:ring-ink focus-visible:ring-offset-2;
  }

  .btn-secondary {
    @apply btn px-5 py-2.5 rounded-full bg-white text-ink text-sm
           border border-border hover:border-neutral-400 hover:bg-neutral-50
           focus-visible:ring-2 focus-visible:ring-neutral-400 focus-visible:ring-offset-2;
  }

  .btn-ghost {
    @apply btn px-4 py-2 rounded-lg text-ink-secondary text-sm
           hover:bg-neutral-100 focus-visible:ring-2 focus-visible:ring-neutral-300;
  }

  .btn-danger {
    @apply btn px-5 py-2.5 rounded-full bg-red-600 text-white text-sm
           hover:bg-red-700
           focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2;
  }

  .btn-accent {
    @apply btn px-5 py-2.5 rounded-full bg-accent text-white text-sm
           hover:bg-indigo-600
           focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2;
  }

  /* ── Inputs ──────────────────────────────────── */
  .input-field {
    @apply w-full px-4 py-3 rounded-xl border border-border bg-white
           text-ink placeholder:text-ink-muted text-[0.9375rem]
           transition-all duration-150
           focus:outline-none focus:ring-2 focus:ring-ink focus:border-transparent
           focus:bg-white hover:border-neutral-400
           disabled:bg-neutral-50 disabled:text-neutral-400 disabled:cursor-not-allowed;
  }

  .input-title {
    @apply w-full py-3 bg-transparent border-0 border-b-2 border-border
           text-3xl sm:text-4xl font-bold text-ink placeholder:text-ink-faint
           transition-colors duration-200
           focus:outline-none focus:border-ink;
    font-family: 'Merriweather', Georgia, serif;
  }

  /* ── Cards ───────────────────────────────────── */
  .card {
    @apply bg-white rounded-2xl border border-border shadow-card p-6;
  }

  .card-hover {
    @apply card transition-shadow duration-200 hover:shadow-card-hover;
  }

  /* ── Article card (feed) ─────────────────────── */
  .article-card {
    @apply py-8 border-b border-border/60 cursor-pointer
           transition-all duration-200 group;
  }

  .article-card:last-of-type {
    @apply border-b-0;
  }

  /* ── Tags ────────────────────────────────────── */
  .tag {
    @apply inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium
           bg-neutral-100 text-neutral-600 hover:bg-neutral-200
           transition-colors duration-150 cursor-pointer;
  }

  .tag-published {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full
           text-xs font-semibold bg-emerald-50 text-emerald-700;
  }

  .tag-draft {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full
           text-xs font-semibold bg-amber-50 text-amber-700;
  }

  /* ── Avatar ──────────────────────────────────── */
  .avatar {
    @apply flex-shrink-0 rounded-full flex items-center justify-center
           font-semibold text-white uppercase select-none;
    background: linear-gradient(135deg, #667eea, #764ba2);
  }

  /* ── Badge ───────────────────────────────────── */
  .badge {
    @apply inline-flex items-center px-2 py-0.5 rounded text-xs font-medium;
  }

  /* ── Divider ─────────────────────────────────── */
  .divider {
    @apply border-t border-border my-8;
  }

  /* ── Log viewer ──────────────────────────────── */
  .log-line    { @apply flex gap-3 font-mono text-xs py-1.5 border-b border-neutral-800; }
  .log-info    { @apply text-sky-400; }
  .log-warn    { @apply text-amber-400; }
  .log-error   { @apply text-red-400; }
  .log-debug   { @apply text-neutral-500; }
  .log-success { @apply text-emerald-400; }

  /* ── Prose content ───────────────────────────── */
  .prose-content {
    @apply text-neutral-700 leading-[1.85];
    font-family: 'Merriweather', Georgia, serif;
    font-size: 1.125rem;
  }

  .prose-content p {
    @apply mb-6 text-[1.0625rem] leading-[1.9];
  }

  .prose-content h2 {
    @apply text-2xl font-bold text-ink mt-10 mb-4;
    font-family: 'Merriweather', Georgia, serif;
  }

  .prose-content h3 {
    @apply text-xl font-bold text-ink mt-8 mb-3;
    font-family: 'Merriweather', Georgia, serif;
  }

  .prose-content blockquote {
    @apply border-l-4 border-accent pl-5 italic text-ink-secondary my-6;
  }

  /* ── Skeleton ────────────────────────────────── */
  .skeleton {
    @apply bg-neutral-100 rounded-lg animate-skeleton;
  }

  /* ── Navbar specific ─────────────────────────── */
  .nav-link {
    @apply text-sm font-medium text-ink-secondary transition-colors duration-150
           hover:text-ink relative;
  }

  .nav-link-active {
    @apply text-ink;
  }

  .nav-link-active::after {
    content: '';
    @apply absolute -bottom-1 left-0 right-0 h-0.5 bg-ink rounded-full;
  }

  /* ── Toggle switch ───────────────────────────── */
  .toggle-track {
    @apply w-11 h-6 rounded-full transition-colors duration-200 relative cursor-pointer;
  }

  .toggle-thumb {
    @apply absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white
           shadow-sm transition-transform duration-200;
  }
}

/* ─── Scrollbar ─────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #d4d4d4; border-radius: 9999px; }
::-webkit-scrollbar-thumb:hover { background: #a3a3a3; }

/* ─── Focus visible only ────────────────────────────────────────── */
:focus:not(:focus-visible) { outline: none; }

